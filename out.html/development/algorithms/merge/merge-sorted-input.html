<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>merge sorted input</title>
<link rel="stylesheet" type="text/css" href="file:///home/rene/github/github/notes/out.html//notes.css">
<script src='file:///home/rene/github/github/notes/out.html//q.js'></script>
</head>
<body>
Search notes: <input size='50' id='q' onchange='q();'>
<h1>merge sorted input</h1>
<div class='t'>
</div><div class='ghf'>Github respository <a href='https://github.com/ReneNyffenegger/Algorithms'>Algorithms</a>, path: <a href='https://github.com/ReneNyffenegger/Algorithms/blob/master//merge/sorted-input/merge-two-files.pl'>/merge/sorted-input/merge-two-files.pl</a></div><pre class='code'>#!/usr/bin/perl
use warnings;
use strict;

die "two input files, one output file needed" unless @ARGV == 3;

my @filename_in;
my @cur_num;
my @cur_val;
my @fh_in;

$filename_in[0] = shift;
$filename_in[1] = shift;

my $filename_out    = shift;

die unless -e $filename_in[0];
die unless -e $filename_in[1];

open($fh_in[0], '<', $filename_in[0]) or die;
open($fh_in[1], '<', $filename_in[1]) or die;
open(my $fh_out  , '>', $filename_out  ) or die;

read_line(0);
read_line(1);

while (defined $cur_num[0] or defined $cur_num[1]) {

  if (defined $cur_num[0] and defined $cur_num[1]) {

    if ($cur_num[0] == $cur_num[1]) {

      write_line($cur_num[0], $cur_val[0], $cur_val[1]);
      read_line(0);
      read_line(1);

    }
    elsif ($cur_num[0] > $cur_num[1]) {
      write_line($cur_num[1], '', $cur_val[1]);
      read_line(1)
    }
    else {
      write_line($cur_num[0], $cur_val[0], '');
      read_line(0)
    }

  }
  elsif (defined $cur_num[0]) {
    write_line($cur_num[0], $cur_val[0], '');
    read_line(1)
  }
  elsif (defined $cur_num[1]) {
    write_line($cur_num[1], '', $cur_val[1]);
    read_line(1);
  }
  else {
    die "Must not happen!";
  }



}

sub read_line {

  my $file_no = shift;

  my $line = readline $fh_in[$file_no];

  if ($line) {
    ($cur_num[$file_no], $cur_val[$file_no]) = split ' ', $line;
  }
  else {
     undef $cur_num[$file_no];
     $cur_val[$file_no] = '';
  }

}

sub write_line {

  my $num   = shift;
  my $val_0 = shift;
  my $val_1 = shift;

  printf($fh_out  "%d %-5s %-5s\n", $num, $val_0, $val_1);

}
</pre><div class='t'> </div>
<div class='h'><h2>See also</h2>
<div class='t'>
  <a href='file:///home/rene/github/github/notes/out.html//development/languages/Perl/modules/Sort/Merge/index.html'>Perl module Sort::Merge</a>,   <a href='file:///home/rene/github/github/notes/out.html//development/languages/Perl/modules/File/MergeSort/index.html'>Perl module Sort::Merge</a> </div>
</div><hr><p><a href='file:///home/rene/github/github/notes/out.html//index.html'>Index</a><div class='bottom'></div></body>
</html>