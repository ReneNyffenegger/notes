<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>getopt</title>
<link rel="stylesheet" type="text/css" href="file:///home/rene/github/github/notes/out.html//notes.css">
<script src='file:///home/rene/github/github/notes/out.html//q.js'></script>
</head>
<body>
Search notes: <input size='50' id='q' onchange='q();'>
<h1>getopt</h1>
<div class='t'>
</div><div class='ghf'>Github respository <a href='https://github.com/ReneNyffenegger/about-libc'>about-libc</a>, path: <a href='https://github.com/ReneNyffenegger/about-libc/blob/master/getopt.c'>getopt.c</a></div><pre class='code'>//
//  Some calls:
//    ./getopt
//    ./getopt -h
//    ./getopt -rhello foo
//    ./getopt -rhello -o
//    ./getopt -rhello -oworld
//    ./getopt -rhello -o foo bar baz
//
//
#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h> // Needed for getopt

void usage() {

  printf("\n\n getopt [-h] [-r R] [-o [O] ]\n\n");
  exit (0);

}

int main (int argc, char **argv) {

  char *R = NULL;
  int   o = 0;
  char *O = "default O value";
  int index;
  int opt;

  opterr = 0;

  while ((opt = getopt (argc, argv, 
            "h"       // no colon:   just a flag
            "r:"      // one colon:  required value
            "o::"     // two colons: optional value
          )) != -1) { // -1: No more options present, terminate loop

    switch (opt) {

      case 'h':
        usage();

      case 'r':
        R = optarg;
        break;

      case 'o':
        O = optarg;
        o = 1;
        break;

      case '?': // ? indicates an error
                // optopt now contains the option that caused
                // the error

        if (optopt == 'r') {
          fprintf (stderr, "-r without value.\n");
        }
        else if (isprint (optopt)) {
          fprintf (stderr, "Unknown option  <code>-%c'.\n", optopt);
        }
        else {
          fprintf (stderr, "Unknown option character </code>\\x%x'.\n", optopt);
        }

        return 1;
        
      default:
        abort ();
      }
  }

  printf ("R = %s, O = %s, o = %d\n", R, O, o);

  for (index = optind; index < argc; index++) {
    printf ("Non-option argument %s\n", argv[index]);
  }

  return 0;
}

</pre><div class='t'> </div><hr><p><a href='file:///home/rene/github/github/notes/out.html//index.html'>Index</a><div class='bottom'></div></body>
</html>