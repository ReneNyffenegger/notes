$ Installing a Let's Encrypt certificate for nginx

After installing *certbot* etc, I was able to install a → development/security/cryptography/SSL-TLS/Lets-Encrypt certificate for a virtual → web/webserver/nginx server like shown here:

Preparation (in a shell)
code {
domain=renenyffenegger.ch
subdomain=…
servername=$subdomain.$domain
mailaddress=mail@$domain
code }

Create a new → web/webserver/nginx/index *virtual server*:
code {
→ Linux/shell/commands/sudo sh -c "echo 'server {
    listen 80;
    listen [::]:80;
    server_name $servername;
}' > → Linux/fhs/etc/nginx/conf_d[/etc/nginx/conf.d]/$servername.conf"
code }

code {
# sudo certbot -m $mailaddress --agree-tos --nginx -d $servername --test-cert
sudo   certbot -m $mailaddress --agree-tos --nginx -d $servername 
code }

Certbot writes something like
code {
> Saving debug log to /var/log/letsencrypt/letsencrypt.log
> Requesting a certificate for ….renenyffenegger.ch
> 
> Successfully received certificate.
> Certificate is saved at: /etc/letsencrypt/live/….renenyffenegger.ch/fullchain.pem
> Key is saved at:         /etc/letsencrypt/live/….renenyffenegger.ch/privkey.pem
> This certificate expires on …
> These files will be updated when the certificate renews.
> Certbot has set up a scheduled task to automatically renew this certificate in the background.
> 
> Deploying certificate
> Successfully deployed certificate for ….renenyffenegger.ch to /etc/nginx/conf.d/….renenyffenegger.ch.conf
> Congratulations! You have successfully enabled HTTPS on https://….renenyffenegger.ch
code }

{ TODO

  Make this virtual server a proxy server by including the following snippet into `/etc/nginx/conf.d/$servername.conf`:
code {
location / {
   proxy_pass http://localhost:8888;
   proxy_set_header Host $host;
   proxy_set_header X-Real-IP $remote_addr;
   proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
   proxy_set_header X-Forwarded-Proto $scheme;
}
code }
}
