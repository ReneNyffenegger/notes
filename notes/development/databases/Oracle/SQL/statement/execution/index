$ Oracle: SQL statement execution

{ Processing an SQL statement

  In order to process an SQL statement, the statement goes roughly to the following four stages:
    • Parsing the SQL text
    • Optimizing
    • Row source generation
    • Execution

  { Hard and soft parse

    Part of the process is to check if → development/databases/Oracle already has parsed the SQL text before. If this is the case and the result of that previous parsing can be used
    for execution, then Oracle can use that result for the execution of the «new» SQL statement. This situation is referred to as ~soft parse~ and the reusable data structures are
    found in the → development/databases/Oracle/architecture/instance/SGA/Shared-Pool/library-cache/Shared-SQL-Area of the → development/databases/Oracle/architecture/instance/SGA/Shared-Pool/library-cache.

    If Oracle does not find a suitable representation in the shared SQL area, the statement needs to be parsed. This is referred to as *hard parse* or *library cache miss*.

  }
  { Updating statistics

    When Oracle is done executing an SQL statement, it updates some statistical numbers for that statement in
    → development/databases/Oracle/installed/dynamic-performance-views/sql[`v$sql`].

    For long running statements, these statistics are updated every 5 seconds.
  }

}
{ Terminating (quarantining) statements

  The *Resource Manager* might terminate the execution of an SQL statement when the statement consumed too many resources.
  -
? This is referred to as quarantining the statement.

  See also the columns `AVOIDED_EXECUTIONS` and `SQL_QUARANTINE` in → development/databases/Oracle/installed/dynamic-performance-views/sql/diff-sql_sqlarea[`v$sql` and `v$sqlarea`].

}
{ Tracing SQL statement execution #ora-sql-exec-tracing

  TODO
    • `→ development/databases/Oracle/installed/packages/dbms/session[dbms_session].session_trace_disable`
    • `→ development/databases/Oracle/installed/packages/dbms/session[dbms_session].session_trace_enable`
    • `→ development/databases/Oracle/installed/packages/dbms/session[dbms_session].set_sql_trace`
    • `xxx_trace_disable` and `xxx_trace_enable` procedures in → development/databases/Oracle/installed/packages/dbms/monitor[`dbms_monitor`]
    • → development/databases/Oracle/adminstration/trace-file-analyzer[Trace file analyzer], → Linux/fhs/u01/app/oracle/product/vv-v-v/dbhome_n/suptools/tfa/release/tfa_home/bin/tfactl[`$ORACLE_HOME/suptools/tfa/release/tfa_home/bin/ftactl`]
    • → development/databases/Oracle/tools/oradebug
    • → development/databases/Oracle/architecture/database/system-files/Automatic-Diagnostic-Repository/trace-file[Trace files]

code {
select
   value
from
  → development/databases/Oracle/installed/dynamic-performance-views/diag/info[v$diag_info]
where
  name = 'Default Trace File';
code }

}


sa:

  → development/databases/Oracle/optimizer

  → development/databases/Oracle/SQL/statement/execution/parallel[Parallel SQL execution]
