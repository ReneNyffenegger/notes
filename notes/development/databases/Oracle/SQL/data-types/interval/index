$ Oracle data type INTERVAL
@ interval

There are two `interval` → development/databases/Oracle/SQL/data-types[data types] in → development/databases/Oracle:
  • `interval day to second`
  • `interval year to month`

{ Literals

code {
select
   --          interval  literals            
   -------------------------------------------------
   interval  '17-9'             year(3) to month       as seventeen_years_and_nine_months,
   interval '-42-9'             year    to month       as minus_forty_two_years_and_9_months,
   interval '1004 14:15:16'     day (4) to second      as approx_1000_days_14_hours_15_minutes_and_16_seconds,
   interval    '2 14:15:16.61'  day (4) to second(1)   as specify_fractions
from
   dual;
code }

}

{ Get duration of interval in seconds #ora-interval-sec

code {
select
    extract(day    from interval    '0 01:01:01' day(4) to second * 86400) s_1,   -- one hour, one minute and one second
    extract(day    from interval '1234 05:06:07' day(4) to second * 86400) s_2,   -- = 1234*24*60*60 + 5*60*60 + 6*60 + 7
    extract(second from interval    '0 01:01:01' day(4) to second        ) wrong  -- = 1 (which is not what was intended)
from
   dual;
code }

  Compare with → development/databases/Oracle/SQL/data-types/timestamp#ora-ts-diff-sec[calculation of difference of two timestamps in seconds].

}
{ AVG and SUM

  With Oracle 23ai, it is possible to directly calculate `AVG` and `SUM` aggregates on interval datatypes:
code {
create table tq84_avg_interval (
    crt   varchar2(10),
    tim  interval day(3) to second(0)
);

begin
   insert into tq84_avg_interval values ('abc', '1 01:01:01');
   insert into tq84_avg_interval values ('abc', '3 03:03:03');
   insert into tq84_avg_interval values ('xyz', '2 02:02:02');
   commit;
end;
/

select
   crt,
   avg(tim) avg_,
   sum(tim) sum_
from
   tq84_avg_interval
group by
   crt;
code }

  Prior to 23ai, trying to calculate the average or sum resulted in ORA-00932: inconsistent datatypes: expected NUMBER got INTERVAL DAY TO SECOND.
  -
  In order to still determine the average and sum, the following detour can be used:
code {
select
   crt,
   interval '0 00:00:01' day(3) to second(0) * avg(extract (day from tim * 86400)) avg_,
   interval '0 00:00:01' day(3) to second(0) * sum(extract (day from tim * 86400)) sum_
from
   tq84_avg_interval
group by
   crt;
code }

   Cleaning up:
code {
code }


}
{ Some statements

  gh|Oracle-Patterns|/SQL/datatypes/interval/some.sql||

}

sa:

  → development/databases/Oracle/SQL/functions/interval[SQL functions related] to the data type `INTERVAL`.

  The function `to_s` of the → development/databases/Oracle/PL-SQL/libs/personal/tim[`tim` PL/SQL package] converts an `interval day to second` value to a number that corresponds
  to the amount of seconds of that interval.

  → development/databases/Oracle/SQL/data-types

  → development/databases/Oracle/SQL/data-types/interval
