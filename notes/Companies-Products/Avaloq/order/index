$ Avaloq order
@ order

An *order* changes an → Companies-Products/Avaloq/object.

All orders have an associated *workflow*.
-
An order is initiated by selecting a *→ Companies-Products/Avaloq/order/workflow[workflow] action* and then clicking *Do*.

{ Two types of orders #avq-two-order-types

  • Static data orders
  • Transaction orders: they create → Companies-Products/Avaloq/book-engine[bookings].

  Apparently, these types of orders are found in the → Companies-Products/Avaloq/development/tables/code/atrx/type table.

}
{ Order validation

  An *order validation* verifies that the (entered) data for an order meets predefined requirements. 

  This validation is triggered when a workflow action is executed.  

code {
[Order Validation 1.0]

validiation of addr

  constraint tq84_foo -- tq84_foo is an arbitrary name for the constraint

    if doc.country_id = lookup.country_id('US') then
       session.raise_ui_error(1, 'This order cannot be executed for the United states');
    end if;

  action "Verify & Do"
       check tq84_foo
  end

end validation
code }

  TODO: the → Companies-Products/Avaloq/development/Avaloq-script[script] context `doc`.

}
{ Misc

  Orders with an attached post it have a yellow circle on the order icon.

  In → Companies-Products/Avaloq/development/Avaloq-script[Avaloq script], orders can be loaded into memory with `session.doc_mgr.load_doc` or `session.doc_mgr.doc_id`.

}
sa:
  The different *workflow actions* and *workflow status* that an order goes through can be tracked in the → Companies-Products/Avaloq/development/tables/trans[`trans`] table.

  The → Companies-Products/Avaloq/development/tables/doc[`doc`] table contains a record for each order.

  Orders pertatining to a specific *position* can be found via
  → Companies-Products/Avaloq/development/tables/evt/pkt3#evt_pkt3-order-for-position[this query].
