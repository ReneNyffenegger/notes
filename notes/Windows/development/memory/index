$ Windows - memory

Windows uses a *flat address space* except for the `FS` → development/languages/assembler/x86/registers[register] in *x86* and the `GS` register in *x64*.

{ Virtual memory #win-virtual-memory

  The *virtual memory* is a contiguous space of memory (-addresses) that each → Windows/development/process[process] sees. Usually, this space is larger than the available physical memory.

  A 32-bit → Windows/development/process[process] has a virtual address space of up to 4 GB, a 64-bit process up to 8 TB.

  The order of addresses in virtual memory does not correspond to the order of addresses in the physical memory.

  By default, the lower half of the virtual memory can be used for the data of a process while the upper half is used for Windows. (Only in 32-bit Windows?)

  Each process has a → Windows/development/memory/page/table[page table] that maps a process's virtual memory to the physical memory or a page in the *paging file*.

  Because the available physical memory at times cannot cover all required access to virtual memory, the memory manager paging out and in parts of the virtual memory to disk.

}
{ Working set

  The amount of virtual memory that is currently stored in physical memory is referred to as the *working set*.

}
{ TODO

  → Windows/development/WinAPI[WinAPI] functions `HeapAlloc`, `VirtualAlloc`, `GlobalAlloc`, `LocalAlloc`, `CoTaskMemAlloc`; → development/languages/C-C-plus-plus/C/libc[libc] functions → development/languages/C-C-plus-plus/C/libc/malloc[`malloc`], `free`
  → development/languages/C-C-plus-plus/CPP[C++] operatior `new`.
  -
  Both, `GlobalAlloc` and `LocalAlloc` call `HeapAlloc`.

  In order to share memory accross → Windows/development/process[processes], *file mapping* must be used (`CreateFileMapping`, `OpenFileMapping`, `MapViewOfFile`, …)

}
sa:
  → Windows/development/memory/page[Memory page]

  → development/memory[Memory (general development)]
