$ wsl --debug-shell

`wsl --debug-shell` opens a WSL2 debug shell for diagnostics purposes.

code {
C:\> → Windows/dirs/Windows/System32/wsl_exe[wsl] --debug-shell
Running the debug shell requires running wsl.exe as Administrator.
code }

As administrator:
code {
C:\> → Windows/dirs/Windows/System32/wsl_exe[wsl] --debug-shell

Welcome to → Linux/distributions/CBL-Mariner[CBL-Mariner] 2.0.20230630 (x86_64) - Kernel 5.15.133.1-microsoft-standard-WSL2 (hvc1)
tq84host login: root (automatic login)

root@tq84host [ ~ ]# cat /mnt/wsl/resolv.conf
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to → Linux/fhs/etc/wsl_conf:
# [network]
# generateResolvConf = false
nameserver 172.31.16.1

root@tq84host [ ~ ]# cat /etc/wsl.conf
command=/usr/bin/WSLGd
[user]

root@tq84host [ ~ ]# ps -oeuser,pid,ppid,cmd -C WSLGd
EUSER        PID    PPID CMD
root         201     189 /usr/bin/WSLGd

root@tq84host [ ~ ]# ps -oeuser,pid,ppid,cmd -p 189
EUSER        PID    PPID CMD
root         189       1 /init

root@tq84host [ ~ ]# ps -oeuser,pid,ppid,cmd --ppid 1
EUSER        PID    PPID CMD
root         176       1 /bin/login -f
root         182       1 gns --socket 7
chrony       184       1 /sbin/chronyd
root         187       1 localhost --port-tracker-fd 7 --bpf-fd -1 --netlink-fd
root         189       1 /init

root@tq84host [ ~ ]# cat → Linux/fhs/etc/os-release
NAME="Common Base Linux Mariner"
VERSION="2.0.20230630"
ID=mariner
VERSION_ID="2.0"
PRETTY_NAME="CBL-Mariner/Linux"
ANSI_COLOR="1;34"
HOME_URL="https://aka.ms/cbl-mariner"
BUG_REPORT_URL="https://aka.ms/cbl-mariner"
SUPPORT_URL="https://aka.ms/cbl-mariner"

root@tq84host [ ~ ]# ps -opid,ppid,cmd -u wslg w
…

root@tq84host [ ~ ]# ps -opid,ppid,cmd -u wslg ww | grep msrdc.exe
…
code }
